# 아이템 8. `finalizer`와 `cleaner` 사용을 피하라
`finalizer`는 나름 쓰임새가 몇가지 있긴 하지만 기본적으로 **쓰지 말아야 한다.** 예측할 수 없고, 상황에 따라 위험할 수 있어 일반적으로 불필요하다. `cleaner`는 `finalizer`보다 덜 위험하지만, 마찬가지로 일반적으로 불필요하다.

## 사용하지 말하야 하는 이유
### 수행 시점과 여부를 보장하지 않는다.
- `finalizer`와 `cleaner`는 즉시 수행 된다는 보장이 없다.
  - 객체에 접근할 수 없게되며 언제 실헹될지도 모른다.
  - JVM이 (무언가의 이유로) 이를 처리하지 못한다면 다음 작업을 문제가 발생할 수 있다.
  - 따라서 제떄 실행되어야 하는 작업은 절대 할 수 없다.
- 수행 시점이 아니라 수행 여부조차 보장하지 않는다.
  - 접근할 수 없는 일부 객체에 딸린 종료 작업을 전혀 수행하지 못한 채 프로그램이 중단될 수 도 있다.
  - 예를들어 데이터베이스 같은 공유 자우너의 영구 락 해제를 `finalizer`나 `cleaner`에 맡기면 시스템이 서서히 멈출 것이다.

### 성능이 떨어진다.
가비지 컬렉터의 효율을 떨어트려 속도나 성능이 떨어진다.

### 보안 문제를 일으킬 수 있다.
`finalizer`공격애 노출되어 보안 문제를 일으킬 수 있다.

## 해결
- `finalizer`나 `cleaner`를 사용하는 대신 클래스에서 지원하는 `close`를 호출하여 자원을 반환하면 된다.
- `try-catch-resource`를 사용하여 예외가 발생해도 제대로 종료되도록 한다.

## 그렇다면 어디에 쓰일까
### 안정망
`finalizer`와 `cleaner`는 사용자가 `close`메서드를 호출하지 않는 것에 대비한 일종의 안정망 역할이다.

### 네이티브 피어
네이티브 피어(native-peer)와 연결된 객체에서 사용한다.
- 네이티브 피어: 일반 자바 객체가 네이티브 메서드를 통해 기능을 위임하 네이티브 객체
  - 가비지 컬렉터는 이들의 존재를 알지 못하니 직접회수하지 못하고 `finalizer`와 `cleaner`를 사용해아한다.
  - 단, 성능 저하를 감수할 수 있고 네이티브 피어가 심각한 자원을 가지고 있지 않을 때에만 해당한다.